## Система учета инфраструктуры кластера ЦОД Москва
###  Описание проекта
Приложение для управления виртуальной инфраструктурой в одном кластере ЦОД Москва. Система позволяет управлять гипервизорами и виртуальными машинами в рамках одного кластера с полным контролем ресурсов, анализом и отчетностью.

### Архитектура проекта

```
- main.py              # Точка входа приложения
- models.py            # Классы данных (VirtualMachine, Hypervisor, Cluster)
- database.py          # Работа с PostgreSQL (создание, чтение, обновление, удаление)
- gui.py               # Графический интерфейс на Tkinter (3 вкладки)
- analysis.py          # Анализ и визуализация данных (графики, отчеты)
- utils.py             # Вспомогательные функции (валидация, расчеты, форматирование)
- async_operations.py  # Асинхронные операции (массовое развертывание)
- requirements.txt     # Зависимости Python
- README.md            # Документация
- test/test.py         # Модульные тесты для проверки корректности работы приложения
```


### Возможности

### Управление виртуальными машинами
-  Создание ВМ с автоматическим размещением на гипервизорах
-  Массовое асинхронное развертывание ВМ
-  Удаление ВМ с освобождением ресурсов
-  Валидация имен и ресурсов по стандартам
-  Просмотр списка всех ВМ с детальной информацией

### Управление гипервизорами
-  Добавление новых гипервизоров в кластер
-  Удаление гипервизоров (только если нет запущенных ВМ)
-  Автоматическая генерация имен гипервизоров
-  Контроль свободных ресурсов
-  Проверка доступных ресурсов кластера
-  Мониторинг загрузки CPU/RAM в реальном времени

### Анализ и отчетность
-  Визуализация использования ресурсов (Matplotlib/Seaborn)
-  Экспорт отчетов в Excel с несколькими листами
-  Детальная статистика по кластеру
-  Графики загрузки CPU/RAM с цветовой индикацией
-  Рекомендации по управлению ресурсами
-  Распределение ВМ по типам

## Установка и запуск

### Настройка базы данных PostgreSQL
```
-- Создание базы данных
CREATE DATABASE datacenter_db
    ENCODING = 'UTF8'
    LC_COLLATE = 'en_US.UTF-8'
    LC_CTYPE = 'en_US.UTF-8'
    TABLESPACE = pg_default
    CONNECTION LIMIT = -1;

-- Подключение к созданной базе данных
\c datacenter_db;

-- Таблицы создаются автоматически при запуске приложения
```

### Настройка подключения к БД
При необходимости измените параметры подключения в файле database.py:
```
self.connection_params = {
    "dbname": "datacenter_db",
    "user": "postgres",      # Ваше имя пользователя
    "password": "postgres",  # Ваш пароль
    "host": "localhost",     # Хост БД
    "port": "5432"          # Порт БД
}
```
### Запуск приложения
```
python main.py
```
## Использование

### Вкладка 1: Виртуальные машины

Основные функции:

- `	`Создание ВМ: Введите имя, vCPU, vRAM, vHDD и нажмите "Создать ВМ"
- `	`Массовое создание: Укажите количество ВМ для асинхронного развертывания (обязательно укажите имя ВМ, остальные ВМ будут создаваться такого же типа, будет увеличиваться только порядковый номер vm77[тип][номер] )
- `	`Удаление ВМ: Выберите ВМ из таблицы и нажмите "Удалить ВМ"
- `	`Ограничения: Просмотр стандартов именования и ограничений ресурсов
- `	`Генерация имени: Автоматическая генерация следующего имени по стандарту (в окне имени укажите тип ВМ и после нажатия кнопки будет сгенерировано следующее имя ВМ по стандарту)

Формат имени ВМ: vm77[тип][номер]

- `	`Типы: app (сервер приложений), db (сервер БД), ts (терминальный сервер)
- `	`Примеры: vm77app01, vm77db02, vm77ts03

### Вкладка 2: Гипервизоры

Основные функции:

- `	`Добавление гипервизора: Введите имя, CPU, RAM или сгенерируйте имя автоматически
- `	`Удаление гипервизора: Выберите гипервизор без ВМ для удаления
- `	`Проверка ресурсов: Анализ общего состояния ресурсов кластера
- `	`Генерация имени: Автоматическая генерация следующего имени по стандарту

Формат имени гипервизора: s77hv[номер]

- `	`Примеры: s77hv01, s77hv02, s77hv03

### Вкладка 3: Анализ и отчеты

Основные функции:

- `	`Генерация графиков: Создание визуализаций использования ресурсов
- `	`Экспорт в Excel: Сохранение полного отчета в формате Excel
- `	`Статистика: Просмотр детальной статистики кластера
- `	`Отчет по кластеру: Генерация комплексного отчета с рекомендациями

Ограничения и стандарты

### Виртуальные машины
```
Параметр	 Минимум	     Максимум	  Особенности

Имя ВМ          -	            -	    vm77[app|db|ts]XX

vCPU	      2 ядра	      24 ядра	    Кратно 2

vRAM	       4 ГБ	          128 ГБ	       -

vHDD	       40 ГБ	      4096 ГБ	       -
```
### Гипервизоры
```
Параметр	Минимум	    Максимум	Особенности

Имя HV	        -	        -	     s77hvXX

CPU	        24 ядра	      256 ядер	    -

RAM	         256 ГБ	      2048 ГБ	    -
```
### Кластер
```
Параметр	                 Значение	              Описание

Максимум HV	                    24	           Максимальное количество гипервизоров

Коэффициент CPU	                3.0	           Переподписка CPU (1:3)

Коэффициент RAM	                1.0	           Переподписка RAM (1:1)

Минимальные свободные ресурсы	10%	           Предупреждение при <10% свободных ресурсов
```
## Технические особенности

### Асинхронное программирование

- `	`Массовое развертывание ВМ выполняется асинхронно
- `	`Использование asyncio для параллельной обработки
- `	`Не блокирует графический интерфейс

### База данных

- `	`PostgreSQL с автоматическим созданием таблиц

### Валидация данных

- `	`Проверка имен по стандартам регулярными выражениями
- `	`Валидация ресурсов на соответствие ограничениям
- `	`Защита от некорректного ввода

### Визуализация

- `	`Графики с Matplotlib/Seaborn
- `	`Цветовая индикация загрузки ресурсов
- `	`Автоматическое сохранение графиков в PNG

### Экспорт данных

- `	`Многостраничные отчеты в Excel
- `	`Структурированные данные по листам
